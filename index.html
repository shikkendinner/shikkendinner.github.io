<!DOCTYPE html>
<html ng-app="testApp">
	<head>
		<title>Angular JS</title>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	</head>
	<body ng-controller="QRScannerController">
		<button ng-click="openQRScanner()">
			Click to Open QR Code Scanner
		</button>

		<h1>RESULTS BELOW FROM SCAN</h1>
		<p>{{result}}</p>
		<br />
		<hr />
		<br />
		<h1>INPUT FILE PLEASE</h1>
		<button type="button" ng-click="getFileToUpload()">Test Uploading of File</button>
		<h3>File Status</h3>
		{{$scope.file ? $scope.file : "File not uploaded yet"}}
	</body>
	
	<script>
		var testApp = angular.module("testApp", []);

		testApp.controller("QRScannerController", ["$scope", "$window", ($scope, $window) => {
			$scope.result = "No Scanning in Progress...";
			$scope.file = undefined;

			$window.setResult = (result) => {
				$scope.$apply(() => {
					$scope.result = result;
				});
			};

			$scope.openQRScanner = () => {
				if($window.Android) {
					$scope.result = $window.Android.scanQRCode();
				} else {
					$window.alert("Hello I am an alert, how do you do?");
				}
			};

			$scope.getFileToUpload = () => {
				if($window.Android) {
					$window.Android.getFile();
				} else {
					$window.alert("Yeah you cant do that man.");
				}
			};
		}]);
	</script>
</html>